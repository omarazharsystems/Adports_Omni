"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = useActionShouldBePushButtonModEffect;

var _react = require("react");

var _addEventListenerWithUndo = _interopRequireDefault(require("../../DOMManipulationWithUndo/addEventListenerWithUndo"));

var _bunchUndos = _interopRequireDefault(require("../../DOMManipulationWithUndo/bunchUndos"));

var _closest = _interopRequireDefault(require("./private/closest"));

var _durableAddClassWithUndo = _interopRequireDefault(require("../../DOMManipulationWithUndo/durableAddClassWithUndo"));

var _findDOMNodeOwner = _interopRequireDefault(require("./private/findDOMNodeOwner"));

var _setOrRemoveAttributeIfFalseWithUndo = _interopRequireDefault(require("../../DOMManipulationWithUndo/setOrRemoveAttributeIfFalseWithUndo"));

var _useAdaptiveCardModEffect = _interopRequireDefault(require("./private/useAdaptiveCardModEffect"));

var _usePrevious = _interopRequireDefault(require("./private/usePrevious"));

/**
 * Accessibility: Action in ActionSet/CardElement should be push button.
 *
 * Pressing the action button is a decision-making process. The decision made by the end-user need to be read by the screen reader.
 * Thus, we need to indicate what decision the end-user made.
 *
 * Since action buttons are button, the intuitive way to indicate selection of a button is marking it as pressed.
 *
 * One exception is the `Action.ShowUrl` action. This button represents expand/collapse header of an accordion.
 * Thus, their state is indicated by `aria-expanded`, instead of `aria-pressed`.
 * However, we still need to remove other unnecessary ARIA fields.
 */
function useActionShouldBePushButtonModEffect(adaptiveCard) {
  var prevAdaptiveCard = (0, _usePrevious.default)(adaptiveCard);
  var pushedCardObjectsRef = (0, _react.useRef)(new Set());
  prevAdaptiveCard === adaptiveCard || pushedCardObjectsRef.current.clear();
  var modder = (0, _react.useMemo)(function () {
    return function (adaptiveCard, cardElement, actionPerformedClassName) {
      var undoStack = [];
      Array.from(cardElement.querySelectorAll('button.ac-pushButton')).forEach(function (actionElement) {
        var cardObject = (0, _findDOMNodeOwner.default)(adaptiveCard, actionElement);

        if (!actionElement.hasAttribute('aria-expanded')) {
          if (pushedCardObjectsRef.current.has(cardObject)) {
            actionPerformedClassName && undoStack.push((0, _durableAddClassWithUndo.default)(actionElement, actionPerformedClassName));
            undoStack.push((0, _setOrRemoveAttributeIfFalseWithUndo.default)(actionElement, 'aria-pressed', 'true'));
          } else {
            undoStack.push((0, _setOrRemoveAttributeIfFalseWithUndo.default)(actionElement, 'aria-pressed', 'false'));
          }
        }

        undoStack.push((0, _setOrRemoveAttributeIfFalseWithUndo.default)(actionElement, 'aria-posinset', false), (0, _setOrRemoveAttributeIfFalseWithUndo.default)(actionElement, 'aria-setsize', false), (0, _setOrRemoveAttributeIfFalseWithUndo.default)(actionElement, 'role', false));
      });
      undoStack.push((0, _addEventListenerWithUndo.default)(cardElement, 'click', function (_ref) {
        var target = _ref.target;
        // Depends on click location, `target` could be the <div> inside the <button class="ac-pushButton">.
        // Thus, we need to check if we the `target` is inside `button.ac-pushButton` or not.
        var actionElement = (0, _closest.default)(target, 'button.ac-pushButton');

        if (!actionElement) {
          return;
        }

        var cardObject = (0, _findDOMNodeOwner.default)(adaptiveCard, actionElement);

        if ( // Not an AC action.
        !cardObject || // Ignores buttons which are supposed to be disabled.
        actionElement.getAttribute('aria-disabled') === 'true' || // Mods all AC action buttons except those for `Action.ShowCard`, which has `aria-expanded` attribute.
        actionElement.hasAttribute('aria-expanded')) {
          return;
        }

        actionPerformedClassName && undoStack.push((0, _durableAddClassWithUndo.default)(actionElement, actionPerformedClassName));
        undoStack.push((0, _setOrRemoveAttributeIfFalseWithUndo.default)(actionElement, 'aria-pressed', 'true'));
        cardObject && pushedCardObjectsRef.current.add(cardObject);
      }, {
        capture: true
      }));
      return function () {
        return (0, _bunchUndos.default)(undoStack)();
      };
    };
  }, [pushedCardObjectsRef]);
  return (0, _useAdaptiveCardModEffect.default)(modder, adaptiveCard);
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ1c2VBY3Rpb25TaG91bGRCZVB1c2hCdXR0b25Nb2RFZmZlY3QiLCJhZGFwdGl2ZUNhcmQiLCJwcmV2QWRhcHRpdmVDYXJkIiwidXNlUHJldmlvdXMiLCJwdXNoZWRDYXJkT2JqZWN0c1JlZiIsInVzZVJlZiIsIlNldCIsImN1cnJlbnQiLCJjbGVhciIsIm1vZGRlciIsInVzZU1lbW8iLCJjYXJkRWxlbWVudCIsImFjdGlvblBlcmZvcm1lZENsYXNzTmFtZSIsInVuZG9TdGFjayIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwiYWN0aW9uRWxlbWVudCIsImNhcmRPYmplY3QiLCJmaW5kRE9NTm9kZU93bmVyIiwiaGFzQXR0cmlidXRlIiwiaGFzIiwicHVzaCIsImR1cmFibGVBZGRDbGFzc1dpdGhVbmRvIiwic2V0T3JSZW1vdmVBdHRyaWJ1dGVJZkZhbHNlV2l0aFVuZG8iLCJhZGRFdmVudExpc3RlbmVyV2l0aFVuZG8iLCJ0YXJnZXQiLCJjbG9zZXN0IiwiZ2V0QXR0cmlidXRlIiwiYWRkIiwiY2FwdHVyZSIsImJ1bmNoVW5kb3MiLCJ1c2VBZGFwdGl2ZUNhcmRNb2RFZmZlY3QiXSwic291cmNlUm9vdCI6ImJ1bmRsZTovLy8iLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9hZGFwdGl2ZUNhcmRzL0F0dGFjaG1lbnQvQWRhcHRpdmVDYXJkSGFja3MvdXNlQWN0aW9uU2hvdWxkQmVQdXNoQnV0dG9uTW9kRWZmZWN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHVzZU1lbW8sIHVzZVJlZiB9IGZyb20gJ3JlYWN0JztcblxuaW1wb3J0IGFkZEV2ZW50TGlzdGVuZXJXaXRoVW5kbyBmcm9tICcuLi8uLi9ET01NYW5pcHVsYXRpb25XaXRoVW5kby9hZGRFdmVudExpc3RlbmVyV2l0aFVuZG8nO1xuaW1wb3J0IGJ1bmNoVW5kb3MgZnJvbSAnLi4vLi4vRE9NTWFuaXB1bGF0aW9uV2l0aFVuZG8vYnVuY2hVbmRvcyc7XG5pbXBvcnQgY2xvc2VzdCBmcm9tICcuL3ByaXZhdGUvY2xvc2VzdCc7XG5pbXBvcnQgZHVyYWJsZUFkZENsYXNzV2l0aFVuZG8gZnJvbSAnLi4vLi4vRE9NTWFuaXB1bGF0aW9uV2l0aFVuZG8vZHVyYWJsZUFkZENsYXNzV2l0aFVuZG8nO1xuaW1wb3J0IGZpbmRET01Ob2RlT3duZXIgZnJvbSAnLi9wcml2YXRlL2ZpbmRET01Ob2RlT3duZXInO1xuaW1wb3J0IHNldE9yUmVtb3ZlQXR0cmlidXRlSWZGYWxzZVdpdGhVbmRvIGZyb20gJy4uLy4uL0RPTU1hbmlwdWxhdGlvbldpdGhVbmRvL3NldE9yUmVtb3ZlQXR0cmlidXRlSWZGYWxzZVdpdGhVbmRvJztcbmltcG9ydCB1c2VBZGFwdGl2ZUNhcmRNb2RFZmZlY3QgZnJvbSAnLi9wcml2YXRlL3VzZUFkYXB0aXZlQ2FyZE1vZEVmZmVjdCc7XG5pbXBvcnQgdXNlUHJldmlvdXMgZnJvbSAnLi9wcml2YXRlL3VzZVByZXZpb3VzJztcblxuaW1wb3J0IHR5cGUgeyBBZGFwdGl2ZUNhcmQsIENhcmRPYmplY3QgfSBmcm9tICdhZGFwdGl2ZWNhcmRzJztcbmltcG9ydCB0eXBlIHsgVW5kb0Z1bmN0aW9uIH0gZnJvbSAnLi4vLi4vRE9NTWFuaXB1bGF0aW9uV2l0aFVuZG8vdHlwZXMvVW5kb0Z1bmN0aW9uJztcblxuLyoqXG4gKiBBY2Nlc3NpYmlsaXR5OiBBY3Rpb24gaW4gQWN0aW9uU2V0L0NhcmRFbGVtZW50IHNob3VsZCBiZSBwdXNoIGJ1dHRvbi5cbiAqXG4gKiBQcmVzc2luZyB0aGUgYWN0aW9uIGJ1dHRvbiBpcyBhIGRlY2lzaW9uLW1ha2luZyBwcm9jZXNzLiBUaGUgZGVjaXNpb24gbWFkZSBieSB0aGUgZW5kLXVzZXIgbmVlZCB0byBiZSByZWFkIGJ5IHRoZSBzY3JlZW4gcmVhZGVyLlxuICogVGh1cywgd2UgbmVlZCB0byBpbmRpY2F0ZSB3aGF0IGRlY2lzaW9uIHRoZSBlbmQtdXNlciBtYWRlLlxuICpcbiAqIFNpbmNlIGFjdGlvbiBidXR0b25zIGFyZSBidXR0b24sIHRoZSBpbnR1aXRpdmUgd2F5IHRvIGluZGljYXRlIHNlbGVjdGlvbiBvZiBhIGJ1dHRvbiBpcyBtYXJraW5nIGl0IGFzIHByZXNzZWQuXG4gKlxuICogT25lIGV4Y2VwdGlvbiBpcyB0aGUgYEFjdGlvbi5TaG93VXJsYCBhY3Rpb24uIFRoaXMgYnV0dG9uIHJlcHJlc2VudHMgZXhwYW5kL2NvbGxhcHNlIGhlYWRlciBvZiBhbiBhY2NvcmRpb24uXG4gKiBUaHVzLCB0aGVpciBzdGF0ZSBpcyBpbmRpY2F0ZWQgYnkgYGFyaWEtZXhwYW5kZWRgLCBpbnN0ZWFkIG9mIGBhcmlhLXByZXNzZWRgLlxuICogSG93ZXZlciwgd2Ugc3RpbGwgbmVlZCB0byByZW1vdmUgb3RoZXIgdW5uZWNlc3NhcnkgQVJJQSBmaWVsZHMuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHVzZUFjdGlvblNob3VsZEJlUHVzaEJ1dHRvbk1vZEVmZmVjdChcbiAgYWRhcHRpdmVDYXJkOiBBZGFwdGl2ZUNhcmRcbik6IHJlYWRvbmx5IFsoY2FyZEVsZW1lbnQ6IEhUTUxFbGVtZW50LCBhY3Rpb25QZXJmb3JtZWRDbGFzc05hbWU/OiBzdHJpbmcpID0+IHZvaWQsICgpID0+IHZvaWRdIHtcbiAgY29uc3QgcHJldkFkYXB0aXZlQ2FyZCA9IHVzZVByZXZpb3VzKGFkYXB0aXZlQ2FyZCk7XG4gIGNvbnN0IHB1c2hlZENhcmRPYmplY3RzUmVmID0gdXNlUmVmPFNldDxDYXJkT2JqZWN0Pj4obmV3IFNldCgpKTtcblxuICBwcmV2QWRhcHRpdmVDYXJkID09PSBhZGFwdGl2ZUNhcmQgfHwgcHVzaGVkQ2FyZE9iamVjdHNSZWYuY3VycmVudC5jbGVhcigpO1xuXG4gIGNvbnN0IG1vZGRlciA9IHVzZU1lbW8oXG4gICAgKCkgPT4gKGFkYXB0aXZlQ2FyZDogQWRhcHRpdmVDYXJkLCBjYXJkRWxlbWVudDogSFRNTEVsZW1lbnQsIGFjdGlvblBlcmZvcm1lZENsYXNzTmFtZT86IHN0cmluZykgPT4ge1xuICAgICAgY29uc3QgdW5kb1N0YWNrOiBVbmRvRnVuY3Rpb25bXSA9IFtdO1xuXG4gICAgICBBcnJheS5mcm9tKGNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2J1dHRvbi5hYy1wdXNoQnV0dG9uJykgYXMgTm9kZUxpc3RPZjxIVE1MQnV0dG9uRWxlbWVudD4pLmZvckVhY2goXG4gICAgICAgIGFjdGlvbkVsZW1lbnQgPT4ge1xuICAgICAgICAgIGNvbnN0IGNhcmRPYmplY3QgPSBmaW5kRE9NTm9kZU93bmVyKGFkYXB0aXZlQ2FyZCwgYWN0aW9uRWxlbWVudCk7XG5cbiAgICAgICAgICBpZiAoIWFjdGlvbkVsZW1lbnQuaGFzQXR0cmlidXRlKCdhcmlhLWV4cGFuZGVkJykpIHtcbiAgICAgICAgICAgIGlmIChwdXNoZWRDYXJkT2JqZWN0c1JlZi5jdXJyZW50LmhhcyhjYXJkT2JqZWN0KSkge1xuICAgICAgICAgICAgICBhY3Rpb25QZXJmb3JtZWRDbGFzc05hbWUgJiZcbiAgICAgICAgICAgICAgICB1bmRvU3RhY2sucHVzaChkdXJhYmxlQWRkQ2xhc3NXaXRoVW5kbyhhY3Rpb25FbGVtZW50LCBhY3Rpb25QZXJmb3JtZWRDbGFzc05hbWUpKTtcblxuICAgICAgICAgICAgICB1bmRvU3RhY2sucHVzaChzZXRPclJlbW92ZUF0dHJpYnV0ZUlmRmFsc2VXaXRoVW5kbyhhY3Rpb25FbGVtZW50LCAnYXJpYS1wcmVzc2VkJywgJ3RydWUnKSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB1bmRvU3RhY2sucHVzaChzZXRPclJlbW92ZUF0dHJpYnV0ZUlmRmFsc2VXaXRoVW5kbyhhY3Rpb25FbGVtZW50LCAnYXJpYS1wcmVzc2VkJywgJ2ZhbHNlJykpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIHVuZG9TdGFjay5wdXNoKFxuICAgICAgICAgICAgc2V0T3JSZW1vdmVBdHRyaWJ1dGVJZkZhbHNlV2l0aFVuZG8oYWN0aW9uRWxlbWVudCwgJ2FyaWEtcG9zaW5zZXQnLCBmYWxzZSksXG4gICAgICAgICAgICBzZXRPclJlbW92ZUF0dHJpYnV0ZUlmRmFsc2VXaXRoVW5kbyhhY3Rpb25FbGVtZW50LCAnYXJpYS1zZXRzaXplJywgZmFsc2UpLFxuICAgICAgICAgICAgc2V0T3JSZW1vdmVBdHRyaWJ1dGVJZkZhbHNlV2l0aFVuZG8oYWN0aW9uRWxlbWVudCwgJ3JvbGUnLCBmYWxzZSlcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICApO1xuXG4gICAgICB1bmRvU3RhY2sucHVzaChcbiAgICAgICAgYWRkRXZlbnRMaXN0ZW5lcldpdGhVbmRvKFxuICAgICAgICAgIGNhcmRFbGVtZW50LFxuICAgICAgICAgICdjbGljaycsXG4gICAgICAgICAgKHsgdGFyZ2V0IH0pID0+IHtcbiAgICAgICAgICAgIC8vIERlcGVuZHMgb24gY2xpY2sgbG9jYXRpb24sIGB0YXJnZXRgIGNvdWxkIGJlIHRoZSA8ZGl2PiBpbnNpZGUgdGhlIDxidXR0b24gY2xhc3M9XCJhYy1wdXNoQnV0dG9uXCI+LlxuICAgICAgICAgICAgLy8gVGh1cywgd2UgbmVlZCB0byBjaGVjayBpZiB3ZSB0aGUgYHRhcmdldGAgaXMgaW5zaWRlIGBidXR0b24uYWMtcHVzaEJ1dHRvbmAgb3Igbm90LlxuICAgICAgICAgICAgY29uc3QgYWN0aW9uRWxlbWVudCA9IGNsb3Nlc3QodGFyZ2V0IGFzIEhUTUxCdXR0b25FbGVtZW50LCAnYnV0dG9uLmFjLXB1c2hCdXR0b24nKTtcblxuICAgICAgICAgICAgaWYgKCFhY3Rpb25FbGVtZW50KSB7XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgY2FyZE9iamVjdCA9IGZpbmRET01Ob2RlT3duZXIoYWRhcHRpdmVDYXJkLCBhY3Rpb25FbGVtZW50KTtcblxuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAvLyBOb3QgYW4gQUMgYWN0aW9uLlxuICAgICAgICAgICAgICAhY2FyZE9iamVjdCB8fFxuICAgICAgICAgICAgICAvLyBJZ25vcmVzIGJ1dHRvbnMgd2hpY2ggYXJlIHN1cHBvc2VkIHRvIGJlIGRpc2FibGVkLlxuICAgICAgICAgICAgICBhY3Rpb25FbGVtZW50LmdldEF0dHJpYnV0ZSgnYXJpYS1kaXNhYmxlZCcpID09PSAndHJ1ZScgfHxcbiAgICAgICAgICAgICAgLy8gTW9kcyBhbGwgQUMgYWN0aW9uIGJ1dHRvbnMgZXhjZXB0IHRob3NlIGZvciBgQWN0aW9uLlNob3dDYXJkYCwgd2hpY2ggaGFzIGBhcmlhLWV4cGFuZGVkYCBhdHRyaWJ1dGUuXG4gICAgICAgICAgICAgIGFjdGlvbkVsZW1lbnQuaGFzQXR0cmlidXRlKCdhcmlhLWV4cGFuZGVkJylcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGFjdGlvblBlcmZvcm1lZENsYXNzTmFtZSAmJlxuICAgICAgICAgICAgICB1bmRvU3RhY2sucHVzaChkdXJhYmxlQWRkQ2xhc3NXaXRoVW5kbyhhY3Rpb25FbGVtZW50LCBhY3Rpb25QZXJmb3JtZWRDbGFzc05hbWUpKTtcblxuICAgICAgICAgICAgdW5kb1N0YWNrLnB1c2goc2V0T3JSZW1vdmVBdHRyaWJ1dGVJZkZhbHNlV2l0aFVuZG8oYWN0aW9uRWxlbWVudCwgJ2FyaWEtcHJlc3NlZCcsICd0cnVlJykpO1xuXG4gICAgICAgICAgICBjYXJkT2JqZWN0ICYmIHB1c2hlZENhcmRPYmplY3RzUmVmLmN1cnJlbnQuYWRkKGNhcmRPYmplY3QpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgeyBjYXB0dXJlOiB0cnVlIH1cbiAgICAgICAgKVxuICAgICAgKTtcblxuICAgICAgcmV0dXJuICgpID0+IGJ1bmNoVW5kb3ModW5kb1N0YWNrKSgpO1xuICAgIH0sXG4gICAgW3B1c2hlZENhcmRPYmplY3RzUmVmXVxuICApO1xuXG4gIHJldHVybiB1c2VBZGFwdGl2ZUNhcmRNb2RFZmZlY3QobW9k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