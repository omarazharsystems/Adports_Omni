"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = useSendFiles;

var _react = require("react");

var _useTrackEvent = _interopRequireDefault(require("./useTrackEvent"));

var _useWebChatAPIContext2 = _interopRequireDefault(require("./internal/useWebChatAPIContext"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/* eslint no-magic-numbers: ["error", { "ignore": [0, 1024] }] */
function useSendFiles() {
  var _useWebChatAPIContext = (0, _useWebChatAPIContext2.default)(),
      sendFiles = _useWebChatAPIContext.sendFiles;

  var trackEvent = (0, _useTrackEvent.default)();
  return (0, _react.useCallback)(function (files) {
    if (files && files.length) {
      sendFiles(files);
      trackEvent('sendFiles', {
        numFiles: files.length,
        sumSizeInKB: Math.round(files.reduce(function (total, _ref) {
          var size = _ref.size;
          return total + size;
        }, 0) / 1024)
      });
    }
  }, [sendFiles, trackEvent]);
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ1c2VTZW5kRmlsZXMiLCJ1c2VXZWJDaGF0QVBJQ29udGV4dCIsInNlbmRGaWxlcyIsInRyYWNrRXZlbnQiLCJ1c2VUcmFja0V2ZW50IiwidXNlQ2FsbGJhY2siLCJmaWxlcyIsImxlbmd0aCIsIm51bUZpbGVzIiwic3VtU2l6ZUluS0IiLCJNYXRoIiwicm91bmQiLCJyZWR1Y2UiLCJ0b3RhbCIsInNpemUiXSwic291cmNlUm9vdCI6ImNvbXBvbmVudDovLy8iLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9ob29rcy91c2VTZW5kRmlsZXMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50IG5vLW1hZ2ljLW51bWJlcnM6IFtcImVycm9yXCIsIHsgXCJpZ25vcmVcIjogWzAsIDEwMjRdIH1dICovXG5cbmltcG9ydCB7IHVzZUNhbGxiYWNrIH0gZnJvbSAncmVhY3QnO1xuXG5pbXBvcnQgdXNlVHJhY2tFdmVudCBmcm9tICcuL3VzZVRyYWNrRXZlbnQnO1xuaW1wb3J0IHVzZVdlYkNoYXRBUElDb250ZXh0IGZyb20gJy4vaW50ZXJuYWwvdXNlV2ViQ2hhdEFQSUNvbnRleHQnO1xuXG50eXBlIFBvc3RBY3Rpdml0eUZpbGUgPSB7XG4gIG5hbWU6IHN0cmluZztcbiAgc2l6ZTogbnVtYmVyO1xuICB0aHVtYm5haWw/OiBzdHJpbmc7XG4gIHVybDogc3RyaW5nO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdXNlU2VuZEZpbGVzKCk6IChmaWxlczogUG9zdEFjdGl2aXR5RmlsZVtdKSA9PiB2b2lkIHtcbiAgY29uc3QgeyBzZW5kRmlsZXMgfSA9IHVzZVdlYkNoYXRBUElDb250ZXh0KCk7XG4gIGNvbnN0IHRyYWNrRXZlbnQgPSB1c2VUcmFja0V2ZW50KCk7XG5cbiAgcmV0dXJuIHVzZUNhbGxiYWNrKFxuICAgIGZpbGVzID0+IHtcbiAgICAgIGlmIChmaWxlcyAmJiBmaWxlcy5sZW5ndGgpIHtcbiAgICAgICAgc2VuZEZpbGVzKGZpbGVzKTtcblxuICAgICAgICB0cmFja0V2ZW50KCdzZW5kRmlsZXMnLCB7XG4gICAgICAgICAgbnVtRmlsZXM6IGZpbGVzLmxlbmd0aCxcbiAgICAgICAgICBzdW1TaXplSW5LQjogTWF0aC5yb3VuZChmaWxlcy5yZWR1Y2UoKHRvdGFsLCB7IHNpemUgfSkgPT4gdG90YWwgKyBzaXplLCAwKSAvIDEwMjQpXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0sXG4gICAgW3NlbmRGaWxlcywgdHJhY2tFdmVudF1cbiAgKTtcbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUVBOztBQUVBOztBQUNBOzs7O0FBTEE7QUFjZSxTQUFTQSxZQUFULEdBQTZEO0VBQzFFLDRCQUFzQixJQUFBQyw4QkFBQSxHQUF0QjtFQUFBLElBQVFDLFNBQVIseUJBQVFBLFNBQVI7O0VBQ0EsSUFBTUMsVUFBVSxHQUFHLElBQUFDLHNCQUFBLEdBQW5CO0VBRUEsT0FBTyxJQUFBQyxrQkFBQSxFQUNMLFVBQUFDLEtBQUssRUFBSTtJQUNQLElBQUlBLEtBQUssSUFBSUEsS0FBSyxDQUFDQyxNQUFuQixFQUEyQjtNQUN6QkwsU0FBUyxDQUFDSSxLQUFELENBQVQ7TUFFQUgsVUFBVSxDQUFDLFdBQUQsRUFBYztRQUN0QkssUUFBUSxFQUFFRixLQUFLLENBQUNDLE1BRE07UUFFdEJFLFdBQVcsRUFBRUMsSUFBSSxDQUFDQyxLQUFMLENBQVdMLEtBQUssQ0FBQ00sTUFBTixDQUFhLFVBQUNDLEtBQUQ7VUFBQSxJQUFVQyxJQUFWLFFBQVVBLElBQVY7VUFBQSxPQUFxQkQsS0FBSyxHQUFHQyxJQUE3QjtRQUFBLENBQWIsRUFBZ0QsQ0FBaEQsSUFBcUQsSUFBaEU7TUFGUyxDQUFkLENBQVY7SUFJRDtFQUNGLENBVkksRUFXTCxDQUFDWixTQUFELEVBQVlDLFVBQVosQ0FYSyxDQUFQO0FBYUQifQ==