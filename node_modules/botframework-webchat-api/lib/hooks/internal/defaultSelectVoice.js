"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = _default;

function _default(_ref, voices, activity) {
  var language = _ref.language;
  // Find the first voice based on this order:
  // 1. Voice with language same as locale as defined in the activity
  // 2. Voice with language same as locale as passed into Web Chat
  // 3. Voice with language same as browser
  // 4. English (United States)
  // 5. First voice
  // We also prioritize voices powered by deep neural network (with keyword "neural" in the voice name).
  return [activity.locale, language, window.navigator.language, 'en-US'].reduce(function (result, targetLanguage) {
    return result || voices.find(function (_ref2) {
      var lang = _ref2.lang,
          name = _ref2.name;
      return lang === targetLanguage && /neural/i.test(name);
    }) || voices.find(function (_ref3) {
      var lang = _ref3.lang;
      return lang === targetLanguage;
    });
  }, null) || voices[0];
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ2b2ljZXMiLCJhY3Rpdml0eSIsImxhbmd1YWdlIiwibG9jYWxlIiwid2luZG93IiwibmF2aWdhdG9yIiwicmVkdWNlIiwicmVzdWx0IiwidGFyZ2V0TGFuZ3VhZ2UiLCJmaW5kIiwibGFuZyIsIm5hbWUiLCJ0ZXN0Il0sInNvdXJjZVJvb3QiOiJjb21wb25lbnQ6Ly8vIiwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvaG9va3MvaW50ZXJuYWwvZGVmYXVsdFNlbGVjdFZvaWNlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uICh7IGxhbmd1YWdlIH0sIHZvaWNlcywgYWN0aXZpdHkpIHtcbiAgLy8gRmluZCB0aGUgZmlyc3Qgdm9pY2UgYmFzZWQgb24gdGhpcyBvcmRlcjpcbiAgLy8gMS4gVm9pY2Ugd2l0aCBsYW5ndWFnZSBzYW1lIGFzIGxvY2FsZSBhcyBkZWZpbmVkIGluIHRoZSBhY3Rpdml0eVxuICAvLyAyLiBWb2ljZSB3aXRoIGxhbmd1YWdlIHNhbWUgYXMgbG9jYWxlIGFzIHBhc3NlZCBpbnRvIFdlYiBDaGF0XG4gIC8vIDMuIFZvaWNlIHdpdGggbGFuZ3VhZ2Ugc2FtZSBhcyBicm93c2VyXG4gIC8vIDQuIEVuZ2xpc2ggKFVuaXRlZCBTdGF0ZXMpXG4gIC8vIDUuIEZpcnN0IHZvaWNlXG5cbiAgLy8gV2UgYWxzbyBwcmlvcml0aXplIHZvaWNlcyBwb3dlcmVkIGJ5IGRlZXAgbmV1cmFsIG5ldHdvcmsgKHdpdGgga2V5d29yZCBcIm5ldXJhbFwiIGluIHRoZSB2b2ljZSBuYW1lKS5cbiAgcmV0dXJuIChcbiAgICBbYWN0aXZpdHkubG9jYWxlLCBsYW5ndWFnZSwgd2luZG93Lm5hdmlnYXRvci5sYW5ndWFnZSwgJ2VuLVVTJ10ucmVkdWNlKFxuICAgICAgKHJlc3VsdCwgdGFyZ2V0TGFuZ3VhZ2UpID0+XG4gICAgICAgIHJlc3VsdCB8fFxuICAgICAgICB2b2ljZXMuZmluZCgoeyBsYW5nLCBuYW1lIH0pID0+IGxhbmcgPT09IHRhcmdldExhbmd1YWdlICYmIC9uZXVyYWwvaXUudGVzdChuYW1lKSkgfHxcbiAgICAgICAgdm9pY2VzLmZpbmQoKHsgbGFuZyB9KSA9PiBsYW5nID09PSB0YXJnZXRMYW5ndWFnZSksXG4gICAgICBudWxsXG4gICAgKSB8fCB2b2ljZXNbMF1cbiAgKTtcbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFlLHdCQUF3QkEsTUFBeEIsRUFBZ0NDLFFBQWhDLEVBQTBDO0VBQUEsSUFBOUJDLFFBQThCLFFBQTlCQSxRQUE4QjtFQUN2RDtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFFQTtFQUNBLE9BQ0UsQ0FBQ0QsUUFBUSxDQUFDRSxNQUFWLEVBQWtCRCxRQUFsQixFQUE0QkUsTUFBTSxDQUFDQyxTQUFQLENBQWlCSCxRQUE3QyxFQUF1RCxPQUF2RCxFQUFnRUksTUFBaEUsQ0FDRSxVQUFDQyxNQUFELEVBQVNDLGNBQVQ7SUFBQSxPQUNFRCxNQUFNLElBQ05QLE1BQU0sQ0FBQ1MsSUFBUCxDQUFZO01BQUEsSUFBR0MsSUFBSCxTQUFHQSxJQUFIO01BQUEsSUFBU0MsSUFBVCxTQUFTQSxJQUFUO01BQUEsT0FBb0JELElBQUksS0FBS0YsY0FBVCxJQUEyQixVQUFXSSxJQUFYLENBQWdCRCxJQUFoQixDQUEvQztJQUFBLENBQVosQ0FEQSxJQUVBWCxNQUFNLENBQUNTLElBQVAsQ0FBWTtNQUFBLElBQUdDLElBQUgsU0FBR0EsSUFBSDtNQUFBLE9BQWNBLElBQUksS0FBS0YsY0FBdkI7SUFBQSxDQUFaLENBSEY7RUFBQSxDQURGLEVBS0UsSUFMRixLQU1LUixNQUFNLENBQUMsQ0FBRCxDQVBiO0FBU0QifQ==