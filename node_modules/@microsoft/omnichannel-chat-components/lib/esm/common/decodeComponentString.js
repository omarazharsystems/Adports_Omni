import { BroadcastService, ElementType } from "..";
export const decodeComponentString = element => {
  if (!element) return null;

  if (typeof element === "string") {
    try {
      const decodedComponent = JSON.parse(element, (_k, v) => {
        const matches = (v === null || v === void 0 ? void 0 : v.match) && v.match(/^\$\$Symbol:(.*)$/);
        return matches ? Symbol.for(matches[1]) : v;
      });
      return decodedComponent;
    } catch {
      const customEvent = {
        elementType: ElementType.Utility,
        eventName: "ReactComponentParseFailed"
      };
      BroadcastService.postMessage(customEvent);
      return null;
    }
  } else {
    return element;
  }
};