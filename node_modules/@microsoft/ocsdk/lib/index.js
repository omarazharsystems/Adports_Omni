"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
Object.defineProperty(exports, "SDKProvider", {
  enumerable: true,
  get: function get() {
    return _SDKProvider["default"];
  }
});
Object.defineProperty(exports, "uuidv4", {
  enumerable: true,
  get: function get() {
    return _uuid.uuidv4;
  }
});

var _typeof2 = _interopRequireDefault(require("@babel/runtime/helpers/typeof"));

var _EventNames = _interopRequireDefault(require("./Common/EventNames"));

var _SDKProvider = _interopRequireDefault(require("./SDKProvider"));

var _EventManager = _interopRequireDefault(require("./Utils/EventManager"));

var _uuid = require("./Utils/uuid");

// Entry point
(function () {
  // Declares window object for NodeJS environment
  if (global.window === undefined) {
    global.window = global;
  }

  if ((typeof window === "undefined" ? "undefined" : (0, _typeof2["default"])(window)) === undefined) {
    throw new Error("window object not found");
  } // Check existence of global objects to avoid overwrite/clashing


  if (!("Microsoft" in window)) {
    window.Microsoft = {};
  }

  if (!("CRM" in window.Microsoft)) {
    window.Microsoft.CRM = {};
  }

  if (!("Omnichannel" in window.Microsoft.CRM)) {
    window.Microsoft.CRM.Omnichannel = {};
  }

  if (!("SDK" in window.Microsoft.CRM.Omnichannel)) {
    window.Microsoft.CRM.Omnichannel.SDK = {
      SDKProvider: _SDKProvider["default"],
      Util: {
        uuidv4: _uuid.uuidv4
      }
    };
  }

  window.document && _EventManager["default"].raiseCustomEvent(_EventNames["default"].OCSDKLOAD);
})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9pbmRleC50cyJdLCJuYW1lcyI6WyJnbG9iYWwiLCJ3aW5kb3ciLCJ1bmRlZmluZWQiLCJFcnJvciIsIk1pY3Jvc29mdCIsIkNSTSIsIk9tbmljaGFubmVsIiwiU0RLIiwiU0RLUHJvdmlkZXIiLCJVdGlsIiwidXVpZHY0IiwiZG9jdW1lbnQiLCJFdmVudE1hbmFnZXIiLCJyYWlzZUN1c3RvbUV2ZW50IiwiRXZlbnROYW1lcyIsIk9DU0RLTE9BRCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUpBO0FBdUJBLENBQUMsWUFBTTtBQUVMO0FBQ0EsTUFBSUEsTUFBTSxDQUFDQyxNQUFQLEtBQWtCQyxTQUF0QixFQUFpQztBQUMvQkYsSUFBQUEsTUFBTSxDQUFDQyxNQUFQLEdBQWdCRCxNQUFoQjtBQUNEOztBQUVELE1BQUksUUFBT0MsTUFBUCwwREFBT0EsTUFBUCxPQUFrQkMsU0FBdEIsRUFBaUM7QUFDL0IsVUFBTSxJQUFJQyxLQUFKLDJCQUFOO0FBQ0QsR0FUSSxDQVdMOzs7QUFDQSxNQUFJLEVBQUUsZUFBZUYsTUFBakIsQ0FBSixFQUE4QjtBQUM1QkEsSUFBQUEsTUFBTSxDQUFDRyxTQUFQLEdBQW1CLEVBQW5CO0FBQ0Q7O0FBRUQsTUFBSSxFQUFFLFNBQVNILE1BQU0sQ0FBQ0csU0FBbEIsQ0FBSixFQUFrQztBQUNoQ0gsSUFBQUEsTUFBTSxDQUFDRyxTQUFQLENBQWlCQyxHQUFqQixHQUF1QixFQUF2QjtBQUNEOztBQUVELE1BQUksRUFBRSxpQkFBaUJKLE1BQU0sQ0FBQ0csU0FBUCxDQUFpQkMsR0FBcEMsQ0FBSixFQUE4QztBQUM1Q0osSUFBQUEsTUFBTSxDQUFDRyxTQUFQLENBQWlCQyxHQUFqQixDQUFxQkMsV0FBckIsR0FBbUMsRUFBbkM7QUFDRDs7QUFFRCxNQUFJLEVBQUUsU0FBU0wsTUFBTSxDQUFDRyxTQUFQLENBQWlCQyxHQUFqQixDQUFxQkMsV0FBaEMsQ0FBSixFQUFrRDtBQUNoREwsSUFBQUEsTUFBTSxDQUFDRyxTQUFQLENBQWlCQyxHQUFqQixDQUFxQkMsV0FBckIsQ0FBaUNDLEdBQWpDLEdBQXVDO0FBQ3JDQyxNQUFBQSxXQUFXLEVBQVhBLHVCQURxQztBQUVyQ0MsTUFBQUEsSUFBSSxFQUFFO0FBQ0pDLFFBQUFBLE1BQU0sRUFBTkE7QUFESTtBQUYrQixLQUF2QztBQU1EOztBQUVEVCxFQUFBQSxNQUFNLENBQUNVLFFBQVAsSUFBbUJDLHlCQUFhQyxnQkFBYixDQUE4QkMsdUJBQVdDLFNBQXpDLENBQW5CO0FBQ0QsQ0FsQ0QiLCJzb3VyY2VSb290Ijoib2NzZGs6Ly8vIiwic291cmNlc0NvbnRlbnQiOlsiLy8gRW50cnkgcG9pbnRcbmltcG9ydCBFdmVudE5hbWVzIGZyb20gXCIuL0NvbW1vbi9FdmVudE5hbWVzXCI7XG5pbXBvcnQgU0RLUHJvdmlkZXIgZnJvbSBcIi4vU0RLUHJvdmlkZXJcIjtcbmltcG9ydCBFdmVudE1hbmFnZXIgZnJvbSBcIi4vVXRpbHMvRXZlbnRNYW5hZ2VyXCI7XG5pbXBvcnQgeyB1dWlkdjQgfSBmcm9tIFwiLi9VdGlscy91dWlkXCI7XG5cbmRlY2xhcmUgZ2xvYmFsIHtcbiAgaW50ZXJmYWNlIFdpbmRvdyB7XG4gICAgTWljcm9zb2Z0OiBhbnk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICB9XG5cbiAgbmFtZXNwYWNlIE5vZGVKUyB7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLW5hbWVzcGFjZVxuICAgIGludGVyZmFjZSBHbG9iYWwge1xuICAgICAgd2luZG93OiBhbnk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIH1cbiAgfVxufVxuXG5leHBvcnQge1xuICBTREtQcm92aWRlcixcbiAgdXVpZHY0XG59O1xuXG4oKCkgPT4ge1xuXG4gIC8vIERlY2xhcmVzIHdpbmRvdyBvYmplY3QgZm9yIE5vZGVKUyBlbnZpcm9ubWVudFxuICBpZiAoZ2xvYmFsLndpbmRvdyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgZ2xvYmFsLndpbmRvdyA9IGdsb2JhbDtcbiAgfVxuXG4gIGlmICh0eXBlb2Ygd2luZG93ID09PSB1bmRlZmluZWQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYHdpbmRvdyBvYmplY3Qgbm90IGZvdW5kYCk7XG4gIH1cblxuICAvLyBDaGVjayBleGlzdGVuY2Ugb2YgZ2xvYmFsIG9iamVjdHMgdG8gYXZvaWQgb3ZlcndyaXRlL2NsYXNoaW5nXG4gIGlmICghKFwiTWljcm9zb2Z0XCIgaW4gd2luZG93KSkge1xuICAgIHdpbmRvdy5NaWNyb3NvZnQgPSB7fTtcbiAgfVxuXG4gIGlmICghKFwiQ1JNXCIgaW4gd2luZG93Lk1pY3Jvc29mdCkpIHtcbiAgICB3aW5kb3cuTWljcm9zb2Z0LkNSTSA9IHt9O1xuICB9XG5cbiAgaWYgKCEoXCJPbW5pY2hhbm5lbFwiIGluIHdpbmRvdy5NaWNyb3NvZnQuQ1JNKSkge1xuICAgIHdpbmRvdy5NaWNyb3NvZnQuQ1JNLk9tbmljaGFubmVsID0ge307XG4gIH1cblxuICBpZiAoIShcIlNES1wiIGluIHdpbmRvdy5NaWNyb3NvZnQuQ1JNLk9tbmljaGFubmVsKSkge1xuICAgIHdpbmRvdy5NaWNyb3NvZnQuQ1JNLk9tbmljaGFubmVsLlNESyA9IHtcbiAgICAgIFNES1Byb3ZpZGVyLFxuICAgICAgVXRpbDoge1xuICAgICAgICB1dWlkdjRcbiAgICAgIH1cbiAgICB9O1xuICB9XG5cbiAgd2luZG93LmRvY3VtZW50ICYmIEV2ZW50TWFuYWdlci5yYWlzZUN1c3RvbUV2ZW50KEV2ZW50TmFtZXMuT0NTREtMT0FEKTtcbn0pKCk7XG4iXX0=