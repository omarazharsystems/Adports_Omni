"use strict";

function _typeof(obj) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && "function" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }, _typeof(obj); }

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = createTimestampMiddleware;

var _react = _interopRequireWildcard(require("react"));

var _AbsoluteTime = _interopRequireDefault(require("./AbsoluteTime"));

var _Timestamp = _interopRequireDefault(require("./Timestamp"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== "function") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }

function _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== "object" && typeof obj !== "function") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }

function createTimestampMiddleware() {
  return function () {
    return function () {
      return function () {
        for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
          args[_key] = arguments[_key];
        }

        var _args$ = args[0],
            activity = _args$.activity,
            hideTimestamp = _args$.hideTimestamp;

        if (typeof activity.timestamp === 'undefined') {
          // ActivityStatusMiddleware is using a legacy UI middleware pattern which does not supports returning `false`.
          // If the activity is sent and there is no timestamp, probably we will just not displaying the timestamp.
          // Or we somehow enforce all activities must have timestamp.
          return /*#__PURE__*/_react.default.createElement(_react.Fragment, null);
        } else if (hideTimestamp) {
          // If "hideTimestamp" is set, we will not render the visual timestamp. But continue to render the screen reader only version.
          return /*#__PURE__*/_react.default.createElement(_AbsoluteTime.default, {
            hide: true,
            value: activity.timestamp
          });
        }

        return /*#__PURE__*/_react.default.createElement(_Timestamp.default, {
          activity: activity
        });
      };
    };
  };
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjcmVhdGVUaW1lc3RhbXBNaWRkbGV3YXJlIiwiYXJncyIsImFjdGl2aXR5IiwiaGlkZVRpbWVzdGFtcCIsInRpbWVzdGFtcCJdLCJzb3VyY2VSb290IjoiY29tcG9uZW50Oi8vLyIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL01pZGRsZXdhcmUvQWN0aXZpdHlTdGF0dXMvY3JlYXRlVGltZXN0YW1wTWlkZGxld2FyZS50c3giXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQWN0aXZpdHlTdGF0dXNNaWRkbGV3YXJlIH0gZnJvbSAnYm90ZnJhbWV3b3JrLXdlYmNoYXQtYXBpJztcbmltcG9ydCBSZWFjdCwgeyBGcmFnbWVudCB9IGZyb20gJ3JlYWN0JztcblxuaW1wb3J0IEFic29sdXRlVGltZSBmcm9tICcuL0Fic29sdXRlVGltZSc7XG5pbXBvcnQgVGltZXN0YW1wIGZyb20gJy4vVGltZXN0YW1wJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gY3JlYXRlVGltZXN0YW1wTWlkZGxld2FyZSgpOiBBY3Rpdml0eVN0YXR1c01pZGRsZXdhcmUge1xuICByZXR1cm4gKCkgPT5cbiAgICAoKSA9PlxuICAgICguLi5hcmdzKSA9PiB7XG4gICAgICBjb25zdCBbeyBhY3Rpdml0eSwgaGlkZVRpbWVzdGFtcCB9XSA9IGFyZ3M7XG5cbiAgICAgIGlmICh0eXBlb2YgYWN0aXZpdHkudGltZXN0YW1wID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAvLyBBY3Rpdml0eVN0YXR1c01pZGRsZXdhcmUgaXMgdXNpbmcgYSBsZWdhY3kgVUkgbWlkZGxld2FyZSBwYXR0ZXJuIHdoaWNoIGRvZXMgbm90IHN1cHBvcnRzIHJldHVybmluZyBgZmFsc2VgLlxuICAgICAgICAvLyBJZiB0aGUgYWN0aXZpdHkgaXMgc2VudCBhbmQgdGhlcmUgaXMgbm8gdGltZXN0YW1wLCBwcm9iYWJseSB3ZSB3aWxsIGp1c3Qgbm90IGRpc3BsYXlpbmcgdGhlIHRpbWVzdGFtcC5cbiAgICAgICAgLy8gT3Igd2Ugc29tZWhvdyBlbmZvcmNlIGFsbCBhY3Rpdml0aWVzIG11c3QgaGF2ZSB0aW1lc3RhbXAuXG4gICAgICAgIHJldHVybiA8RnJhZ21lbnQgLz47XG4gICAgICB9IGVsc2UgaWYgKGhpZGVUaW1lc3RhbXApIHtcbiAgICAgICAgLy8gSWYgXCJoaWRlVGltZXN0YW1wXCIgaXMgc2V0LCB3ZSB3aWxsIG5vdCByZW5kZXIgdGhlIHZpc3VhbCB0aW1lc3RhbXAuIEJ1dCBjb250aW51ZSB0byByZW5kZXIgdGhlIHNjcmVlbiByZWFkZXIgb25seSB2ZXJzaW9uLlxuICAgICAgICByZXR1cm4gPEFic29sdXRlVGltZSBoaWRlPXt0cnVlfSB2YWx1ZT17YWN0aXZpdHkudGltZXN0YW1wfSAvPjtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIDxUaW1lc3RhbXAgYWN0aXZpdHk9e2FjdGl2aXR5fSAvPjtcbiAgICB9O1xufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFDQTs7QUFFQTs7QUFDQTs7Ozs7Ozs7QUFFZSxTQUFTQSx5QkFBVCxHQUErRDtFQUM1RSxPQUFPO0lBQUEsT0FDTDtNQUFBLE9BQ0EsWUFBYTtRQUFBLGtDQUFUQyxJQUFTO1VBQVRBLElBQVM7UUFBQTs7UUFDWCxhQUFzQ0EsSUFBdEM7UUFBQSxJQUFTQyxRQUFULFVBQVNBLFFBQVQ7UUFBQSxJQUFtQkMsYUFBbkIsVUFBbUJBLGFBQW5COztRQUVBLElBQUksT0FBT0QsUUFBUSxDQUFDRSxTQUFoQixLQUE4QixXQUFsQyxFQUErQztVQUM3QztVQUNBO1VBQ0E7VUFDQSxvQkFBTyw2QkFBQyxlQUFELE9BQVA7UUFDRCxDQUxELE1BS08sSUFBSUQsYUFBSixFQUFtQjtVQUN4QjtVQUNBLG9CQUFPLDZCQUFDLHFCQUFEO1lBQWMsSUFBSSxFQUFFLElBQXBCO1lBQTBCLEtBQUssRUFBRUQsUUFBUSxDQUFDRTtVQUExQyxFQUFQO1FBQ0Q7O1FBRUQsb0JBQU8sNkJBQUMsa0JBQUQ7VUFBVyxRQUFRLEVBQUVGO1FBQXJCLEVBQVA7TUFDRCxDQWZEO0lBQUEsQ0FESztFQUFBLENBQVA7QUFpQkQifQ==