"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _botframeworkWebchatApi = require("botframework-webchat-api");

var _classnames = _interopRequireDefault(require("classnames"));

var _propTypes = _interopRequireDefault(require("prop-types"));

var _react = _interopRequireDefault(require("react"));

var _Bubble = _interopRequireDefault(require("./Bubble"));

var _ScreenReaderText = _interopRequireDefault(require("../ScreenReaderText"));

var _useStyleSet3 = _interopRequireDefault(require("../hooks/useStyleSet"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }

function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

function _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== "undefined" && arr[Symbol.iterator] || arr["@@iterator"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"] != null) _i["return"](); } finally { if (_d) throw _e; } } return _arr; }

function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }

var useDirection = _botframeworkWebchatApi.hooks.useDirection,
    useLocalizer = _botframeworkWebchatApi.hooks.useLocalizer;

var CarouselFilmStripAttachment = function CarouselFilmStripAttachment(_ref) {
  var activity = _ref.activity,
      attachment = _ref.attachment,
      className = _ref.className,
      fromUser = _ref.fromUser,
      hasAvatar = _ref.hasAvatar,
      hideNub = _ref.hideNub,
      index = _ref.index,
      renderAttachment = _ref.renderAttachment,
      showAvatar = _ref.showAvatar,
      showNub = _ref.showNub;

  var _useDirection = useDirection(),
      _useDirection2 = _slicedToArray(_useDirection, 1),
      direction = _useDirection2[0];

  var localize = useLocalizer();

  var _useStyleSet = (0, _useStyleSet3.default)(),
      _useStyleSet2 = _slicedToArray(_useStyleSet, 1),
      carouselFilmStripAttachmentStyleSet = _useStyleSet2[0].carouselFilmStripAttachment;

  var attachedAlt = localize(fromUser ? 'ACTIVITY_YOU_ATTACHED_ALT' : 'ACTIVITY_BOT_ATTACHED_ALT');
  return /*#__PURE__*/_react.default.createElement("li", {
    "aria-roledescription": "attachment",
    className: (0, _classnames.default)('webchat__carousel-filmstrip-attachment', {
      'webchat__carousel-filmstrip-attachment--hide-avatar': hasAvatar && !showAvatar,
      'webchat__carousel-filmstrip-attachment--hide-nub': hideNub,
      'webchat__carousel-filmstrip-attachment--rtl': direction === 'rtl',
      'webchat__carousel-filmstrip-attachment--show-avatar': showAvatar,
      'webchat__carousel-filmstrip-attachment--show-nub': showNub
    }, 'react-film__filmstrip__item', carouselFilmStripAttachmentStyleSet + '', (className || '') + ''),
    role: "listitem",
    tabIndex: 0
  }, /*#__PURE__*/_react.default.createElement(_ScreenReaderText.default, {
    text: attachedAlt
  }), /*#__PURE__*/_react.default.createElement(_Bubble.default, {
    fromUser: fromUser,
    key: index,
    nub: false
  }, renderAttachment({
    activity: activity,
    attachment: attachment
  }), /*#__PURE__*/_react.default.createElement("div", {
    className: "webchat__carousel-filmstrip-attachment--focus"
  })));
};

CarouselFilmStripAttachment.defaultProps = {
  className: ''
};
CarouselFilmStripAttachment.propTypes = {
  activity: _propTypes.default.shape({
    attachments: _propTypes.default.array,
    from: _propTypes.default.shape({
      role: _propTypes.default.string.isRequired
    }).isRequired,
    text: _propTypes.default.string,
    textFormat: _propTypes.default.string,
    timestamp: _propTypes.default.string
  }).isRequired,
  attachment: _propTypes.default.shape({
    content: _propTypes.default.any
  }).isRequired,
  className: _propTypes.default.string,
  fromUser: _propTypes.default.any.isRequired,
  hasAvatar: _propTypes.default.any.isRequired,
  hideNub: _propTypes.default.bool.isRequired,
  index: _propTypes.default.number.isRequired,
  renderAttachment: _propTypes.default.func.isRequired,
  showAvatar: _propTypes.default.bool.isRequired,
  showNub: _propTypes.default.bool.isRequired
};
var _default = CarouselFilmStripAttachment;
exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ1c2VEaXJlY3Rpb24iLCJob29rcyIsInVzZUxvY2FsaXplciIsIkNhcm91c2VsRmlsbVN0cmlwQXR0YWNobWVudCIsImFjdGl2aXR5IiwiYXR0YWNobWVudCIsImNsYXNzTmFtZSIsImZyb21Vc2VyIiwiaGFzQXZhdGFyIiwiaGlkZU51YiIsImluZGV4IiwicmVuZGVyQXR0YWNobWVudCIsInNob3dBdmF0YXIiLCJzaG93TnViIiwiZGlyZWN0aW9uIiwibG9jYWxpemUiLCJ1c2VTdHlsZVNldCIsImNhcm91c2VsRmlsbVN0cmlwQXR0YWNobWVudFN0eWxlU2V0IiwiY2Fyb3VzZWxGaWxtU3RyaXBBdHRhY2htZW50IiwiYXR0YWNoZWRBbHQiLCJjbGFzc05hbWVzIiwiZGVmYXVsdFByb3BzIiwicHJvcFR5cGVzIiwiUHJvcFR5cGVzIiwic2hhcGUiLCJhdHRhY2htZW50cyIsImFycmF5IiwiZnJvbSIsInJvbGUiLCJzdHJpbmciLCJpc1JlcXVpcmVkIiwidGV4dCIsInRleHRGb3JtYXQiLCJ0aW1lc3RhbXAiLCJjb250ZW50IiwiYW55IiwiYm9vbCIsIm51bWJlciIsImZ1bmMiXSwic291cmNlUm9vdCI6ImNvbXBvbmVudDovLy8iLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9BY3Rpdml0eS9DYXJvdXNlbEZpbG1TdHJpcEF0dGFjaG1lbnQuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgaG9va3MgfSBmcm9tICdib3RmcmFtZXdvcmstd2ViY2hhdC1hcGknO1xuaW1wb3J0IGNsYXNzTmFtZXMgZnJvbSAnY2xhc3NuYW1lcyc7XG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gJ3Byb3AtdHlwZXMnO1xuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcblxuaW1wb3J0IEJ1YmJsZSBmcm9tICcuL0J1YmJsZSc7XG5pbXBvcnQgU2NyZWVuUmVhZGVyVGV4dCBmcm9tICcuLi9TY3JlZW5SZWFkZXJUZXh0JztcbmltcG9ydCB1c2VTdHlsZVNldCBmcm9tICcuLi9ob29rcy91c2VTdHlsZVNldCc7XG5cbmNvbnN0IHsgdXNlRGlyZWN0aW9uLCB1c2VMb2NhbGl6ZXIgfSA9IGhvb2tzO1xuXG5jb25zdCBDYXJvdXNlbEZpbG1TdHJpcEF0dGFjaG1lbnQgPSAoe1xuICBhY3Rpdml0eSxcbiAgYXR0YWNobWVudCxcbiAgY2xhc3NOYW1lLFxuICBmcm9tVXNlcixcbiAgaGFzQXZhdGFyLFxuICBoaWRlTnViLFxuICBpbmRleCxcbiAgcmVuZGVyQXR0YWNobWVudCxcbiAgc2hvd0F2YXRhcixcbiAgc2hvd051YlxufSkgPT4ge1xuICBjb25zdCBbZGlyZWN0aW9uXSA9IHVzZURpcmVjdGlvbigpO1xuICBjb25zdCBsb2NhbGl6ZSA9IHVzZUxvY2FsaXplcigpO1xuICBjb25zdCBbeyBjYXJvdXNlbEZpbG1TdHJpcEF0dGFjaG1lbnQ6IGNhcm91c2VsRmlsbVN0cmlwQXR0YWNobWVudFN0eWxlU2V0IH1dID0gdXNlU3R5bGVTZXQoKTtcblxuICBjb25zdCBhdHRhY2hlZEFsdCA9IGxvY2FsaXplKGZyb21Vc2VyID8gJ0FDVElWSVRZX1lPVV9BVFRBQ0hFRF9BTFQnIDogJ0FDVElWSVRZX0JPVF9BVFRBQ0hFRF9BTFQnKTtcblxuICByZXR1cm4gKFxuICAgIDxsaVxuICAgICAgYXJpYS1yb2xlZGVzY3JpcHRpb249XCJhdHRhY2htZW50XCJcbiAgICAgIGNsYXNzTmFtZT17Y2xhc3NOYW1lcyhcbiAgICAgICAgJ3dlYmNoYXRfX2Nhcm91c2VsLWZpbG1zdHJpcC1hdHRhY2htZW50JyxcbiAgICAgICAge1xuICAgICAgICAgICd3ZWJjaGF0X19jYXJvdXNlbC1maWxtc3RyaXAtYXR0YWNobWVudC0taGlkZS1hdmF0YXInOiBoYXNBdmF0YXIgJiYgIXNob3dBdmF0YXIsXG4gICAgICAgICAgJ3dlYmNoYXRfX2Nhcm91c2VsLWZpbG1zdHJpcC1hdHRhY2htZW50LS1oaWRlLW51Yic6IGhpZGVOdWIsXG4gICAgICAgICAgJ3dlYmNoYXRfX2Nhcm91c2VsLWZpbG1zdHJpcC1hdHRhY2htZW50LS1ydGwnOiBkaXJlY3Rpb24gPT09ICdydGwnLFxuICAgICAgICAgICd3ZWJjaGF0X19jYXJvdXNlbC1maWxtc3RyaXAtYXR0YWNobWVudC0tc2hvdy1hdmF0YXInOiBzaG93QXZhdGFyLFxuICAgICAgICAgICd3ZWJjaGF0X19jYXJvdXNlbC1maWxtc3RyaXAtYXR0YWNobWVudC0tc2hvdy1udWInOiBzaG93TnViXG4gICAgICAgIH0sXG4gICAgICAgICdyZWFjdC1maWxtX19maWxtc3RyaXBfX2l0ZW0nLFxuICAgICAgICBjYXJvdXNlbEZpbG1TdHJpcEF0dGFjaG1lbnRTdHlsZVNldCArICcnLFxuICAgICAgICAoY2xhc3NOYW1lIHx8ICcnKSArICcnXG4gICAgICApfVxuICAgICAgcm9sZT1cImxpc3RpdGVtXCJcbiAgICAgIHRhYkluZGV4PXswfVxuICAgID5cbiAgICAgIDxTY3JlZW5SZWFkZXJUZXh0IHRleHQ9e2F0dGFjaGVkQWx0fSAvPlxuICAgICAgPEJ1YmJsZSBmcm9tVXNlcj17ZnJvbVVzZXJ9IGtleT17aW5kZXh9IG51Yj17ZmFsc2V9PlxuICAgICAgICB7cmVuZGVyQXR0YWNobWVudCh7IGFjdGl2aXR5LCBhdHRhY2htZW50IH0pfVxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIndlYmNoYXRfX2Nhcm91c2VsLWZpbG1zdHJpcC1hdHRhY2htZW50LS1mb2N1c1wiIC8+XG4gICAgICA8L0J1YmJsZT5cbiAgICA8L2xpPlxuICApO1xufTtcblxuQ2Fyb3VzZWxGaWxtU3RyaXBBdHRhY2htZW50LmRlZmF1bHRQcm9wcyA9IHtcbiAgY2xhc3NOYW1lOiAnJ1xufTtcblxuQ2Fyb3VzZWxGaWxtU3RyaXBBdHRhY2htZW50LnByb3BUeXBlcyA9IHtcbiAgYWN0aXZpdHk6IFByb3BUeXBlcy5zaGFwZSh7XG4gICAgYXR0YWNobWVudHM6IFByb3BUeXBlcy5hcnJheSxcbiAgICBmcm9tOiBQcm9wVHlwZXMuc2hhcGUoe1xuICAgICAgcm9sZTogUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkXG4gICAgfSkuaXNSZXF1aXJlZCxcbiAgICB0ZXh0OiBQcm9wVHlwZXMuc3RyaW5nLFxuICAgIHRleHRGb3JtYXQ6IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgdGltZXN0YW1wOiBQcm9wVHlwZXMuc3RyaW5nXG4gIH0pLmlzUmVxdWlyZWQsXG4gIGF0dGFjaG1lbnQ6IFByb3BUeXBlcy5zaGFwZSh7XG4gICAgY29udGVudDogUHJvcFR5cGVzLmFueVxuICB9KS5pc1JlcXVpcmVkLFxuICBjbGFzc05hbWU6IFByb3BUeXBlcy5zdHJpbmcsXG4gIGZyb21Vc2VyOiBQcm9wVHlwZXMuYW55LmlzUmVxdWlyZWQsXG4gIGhhc0F2YXRhcjogUHJvcFR5cGVzLmFueS5pc1JlcXVpcmVkLFxuICBoaWRlTnViOiBQcm9wVHlwZXMuYm9vbC5pc1JlcXVpcmVkLFxuICBpbmRleDogUHJvcFR5cGVzLm51bWJlci5pc1JlcXVpcmVkLFxuICByZW5kZXJBdHRhY2htZW50OiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxuICBzaG93QXZhdGFyOiBQcm9wVHlwZXMuYm9vbC5pc1JlcXVpcmVkLFxuICBzaG93TnViOiBQcm9wVHlwZXMuYm9vbC5pc1JlcXVpcmVkXG59O1xuXG5leHBvcnQgZGVmYXVsdCBDYXJvdXNlbEZpbG1TdHJpcEF0dGFjaG1lbnQ7XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFFQTs7QUFDQTs7QUFDQTs7Ozs7Ozs7Ozs7Ozs7OztBQUVBLElBQVFBLFlBQVIsR0FBdUNDLDZCQUF2QyxDQUFRRCxZQUFSO0FBQUEsSUFBc0JFLFlBQXRCLEdBQXVDRCw2QkFBdkMsQ0FBc0JDLFlBQXRCOztBQUVBLElBQU1DLDJCQUEyQixHQUFHLFNBQTlCQSwyQkFBOEIsT0FXOUI7RUFBQSxJQVZKQyxRQVVJLFFBVkpBLFFBVUk7RUFBQSxJQVRKQyxVQVNJLFFBVEpBLFVBU0k7RUFBQSxJQVJKQyxTQVFJLFFBUkpBLFNBUUk7RUFBQSxJQVBKQyxRQU9JLFFBUEpB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