"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _propTypes = _interopRequireDefault(require("prop-types"));

var _react = _interopRequireDefault(require("react"));

var _ImageContent = _interopRequireDefault(require("./ImageContent"));

var _readDataURIToBlob = _interopRequireDefault(require("../Utils/readDataURIToBlob"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var ImageAttachment = function ImageAttachment(_ref) {
  var attachment = _ref.attachment;
  var imageURL = attachment.thumbnailUrl || attachment.contentUrl; // To support Content Security Policy, data URI cannot be used.
  // We need to parse the data URI into a blob: URL.

  var blob = (0, _readDataURIToBlob.default)(imageURL);

  if (blob) {
    imageURL = URL.createObjectURL(blob);
  }

  return /*#__PURE__*/_react.default.createElement(_ImageContent.default, {
    alt: attachment.name,
    src: imageURL
  });
};

ImageAttachment.propTypes = {
  // Either attachment.contentUrl or attachment.thumbnailUrl must be specified.
  attachment: _propTypes.default.oneOfType([_propTypes.default.shape({
    contentUrl: _propTypes.default.string.isRequired,
    name: _propTypes.default.string,
    thumbnailUrl: _propTypes.default.string
  }), _propTypes.default.shape({
    contentUrl: _propTypes.default.string,
    name: _propTypes.default.string,
    thumbnailUrl: _propTypes.default.string.isRequired
  })]).isRequired
};
var _default = ImageAttachment;
exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJJbWFnZUF0dGFjaG1lbnQiLCJhdHRhY2htZW50IiwiaW1hZ2VVUkwiLCJ0aHVtYm5haWxVcmwiLCJjb250ZW50VXJsIiwiYmxvYiIsInJlYWREYXRhVVJJVG9CbG9iIiwiVVJMIiwiY3JlYXRlT2JqZWN0VVJMIiwibmFtZSIsInByb3BUeXBlcyIsIlByb3BUeXBlcyIsIm9uZU9mVHlwZSIsInNoYXBlIiwic3RyaW5nIiwiaXNSZXF1aXJlZCJdLCJzb3VyY2VSb290IjoiY29tcG9uZW50Oi8vLyIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL0F0dGFjaG1lbnQvSW1hZ2VBdHRhY2htZW50LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBQcm9wVHlwZXMgZnJvbSAncHJvcC10eXBlcyc7XG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuXG5pbXBvcnQgSW1hZ2VDb250ZW50IGZyb20gJy4vSW1hZ2VDb250ZW50JztcbmltcG9ydCByZWFkRGF0YVVSSVRvQmxvYiBmcm9tICcuLi9VdGlscy9yZWFkRGF0YVVSSVRvQmxvYic7XG5cbmNvbnN0IEltYWdlQXR0YWNobWVudCA9ICh7IGF0dGFjaG1lbnQgfSkgPT4ge1xuICBsZXQgaW1hZ2VVUkwgPSBhdHRhY2htZW50LnRodW1ibmFpbFVybCB8fCBhdHRhY2htZW50LmNvbnRlbnRVcmw7XG5cbiAgLy8gVG8gc3VwcG9ydCBDb250ZW50IFNlY3VyaXR5IFBvbGljeSwgZGF0YSBVUkkgY2Fubm90IGJlIHVzZWQuXG4gIC8vIFdlIG5lZWQgdG8gcGFyc2UgdGhlIGRhdGEgVVJJIGludG8gYSBibG9iOiBVUkwuXG4gIGNvbnN0IGJsb2IgPSByZWFkRGF0YVVSSVRvQmxvYihpbWFnZVVSTCk7XG5cbiAgaWYgKGJsb2IpIHtcbiAgICBpbWFnZVVSTCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7XG4gIH1cblxuICByZXR1cm4gPEltYWdlQ29udGVudCBhbHQ9e2F0dGFjaG1lbnQubmFtZX0gc3JjPXtpbWFnZVVSTH0gLz47XG59O1xuXG5JbWFnZUF0dGFjaG1lbnQucHJvcFR5cGVzID0ge1xuICAvLyBFaXRoZXIgYXR0YWNobWVudC5jb250ZW50VXJsIG9yIGF0dGFjaG1lbnQudGh1bWJuYWlsVXJsIG11c3QgYmUgc3BlY2lmaWVkLlxuICBhdHRhY2htZW50OiBQcm9wVHlwZXMub25lT2ZUeXBlKFtcbiAgICBQcm9wVHlwZXMuc2hhcGUoe1xuICAgICAgY29udGVudFVybDogUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLFxuICAgICAgbmFtZTogUHJvcFR5cGVzLnN0cmluZyxcbiAgICAgIHRodW1ibmFpbFVybDogUHJvcFR5cGVzLnN0cmluZ1xuICAgIH0pLFxuICAgIFByb3BUeXBlcy5zaGFwZSh7XG4gICAgICBjb250ZW50VXJsOiBQcm9wVHlwZXMuc3RyaW5nLFxuICAgICAgbmFtZTogUHJvcFR5cGVzLnN0cmluZyxcbiAgICAgIHRodW1ibmFpbFVybDogUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkXG4gICAgfSlcbiAgXSkuaXNSZXF1aXJlZFxufTtcblxuZXhwb3J0IGRlZmF1bHQgSW1hZ2VBdHRhY2htZW50O1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBQ0E7O0FBRUE7O0FBQ0E7Ozs7QUFFQSxJQUFNQSxlQUFlLEdBQUcsU0FBbEJBLGVBQWtCLE9BQW9CO0VBQUEsSUFBakJDLFVBQWlCLFFBQWpCQSxVQUFpQjtFQUMxQyxJQUFJQyxRQUFRLEdBQUdELFVBQVUsQ0FBQ0UsWUFBWCxJQUEyQkYsVUFBVSxDQUFDRyxVQUFyRCxDQUQwQyxDQUcxQztFQUNBOztFQUNBLElBQU1DLElBQUksR0FBRyxJQUFBQywwQkFBQSxFQUFrQkosUUFBbEIsQ0FBYjs7RUFFQSxJQUFJRyxJQUFKLEVBQVU7SUFDUkgsUUFBUSxHQUFHSyxHQUFHLENBQUNDLGVBQUosQ0FBb0JILElBQXBCLENBQVg7RUFDRDs7RUFFRCxvQkFBTyw2QkFBQyxxQkFBRDtJQUFjLEdBQUcsRUFBRUosVUFBVSxDQUFDUSxJQUE5QjtJQUFvQyxHQUFHLEVBQUVQO0VBQXpDLEVBQVA7QUFDRCxDQVpEOztBQWNBRixlQUFlLENBQUNVLFNBQWhCLEdBQTRCO0VBQzFCO0VBQ0FULFVBQVUsRUFBRVUsa0JBQUEsQ0FBVUMsU0FBVixDQUFvQixDQUM5QkQsa0JBQUEsQ0FBVUUsS0FBVixDQUFnQjtJQUNkVCxVQUFVLEVBQUVPLGtCQUFBLENBQVVHLE1BQVYsQ0FBaUJDLFVBRGY7SUFFZE4sSUFBSSxFQUFFRSxrQkFBQSxDQUFVRyxNQUZGO0lBR2RYLFlBQVksRUFBRVEsa0JBQUEsQ0FBVUc7RUFIVixDQUFoQixDQUQ4QixFQU05Qkgsa0JBQUEsQ0FBVUUsS0FBVixDQUFnQjtJQUNkVCxVQUFVLEVBQUVPLGtCQUFBLENBQVVHLE1BRFI7SUFFZEwsSUFBSSxFQUFFRSxrQkFBQSxDQUFVRyxNQUZGO0lBR2RYLFlBQVksRUFBRVEsa0JBQUEsQ0FBVUcsTUFBVixDQUFpQkM7RUFIakIsQ0FBaEIsQ0FOOEIsQ0FBcEIsRUFXVEE7QUFidUIsQ0FBNUI7ZUFnQmVmLGUifQ==